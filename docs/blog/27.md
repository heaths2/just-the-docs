---
layout: default
title: LVM 설정
parent: Blog
grand_parent: Category
permalink: docs/category/blog/27
child_nav_order: desc
---

개요

> - LVM 설정한다.
{: .new }

LVM 설정

```bash
lsblk
parted --script /dev/sdb mklabel gpt mkpart primary 0 100% p
```

![image](https://user-images.githubusercontent.com/36792594/192085816-5958c6fa-7fbf-4e6c-97e0-9e0dce490484.png)

```bash
parted --list
```

![IMG-001](https://user-images.githubusercontent.com/36792594/183372804-3960c46f-b885-4981-89d1-84e7355e1940.png)

```bash
parted /dev/sdb
print
```

![IMG-002](https://user-images.githubusercontent.com/36792594/183372813-409e6e35-3575-4631-9cac-7c6455d6f3d9.png)

```bash
mklabel gpt
mkpart primary 0 100%
ignore
quit
```

![IMG-003](https://user-images.githubusercontent.com/36792594/183372815-541d5c7c-62d9-4b0f-b775-85ccff8dae17.png)

```bash
pvcreate /dev/sdb1
pvdisplay
```

![IMG-004](https://user-images.githubusercontent.com/36792594/183379107-c523af84-c9fa-4b92-80a6-84ee94e141fc.png)

```bash
vgcreate Disks /dev/sdb1
vgdisplay
vgs
```

![IMG-005](https://user-images.githubusercontent.com/36792594/183378612-96f855ad-d7c7-4968-af9d-1f39fb0e39ab.png)

```bash
lvcreate -L 20G -n ubuntu1_root Disks
lvcreate -L 10G -n ubuntu1_swap Disks
lvs
```

![IMG-006](https://user-images.githubusercontent.com/36792594/183378600-bea3b6bb-1fb6-4a50-8462-a5d65f9f4b96.png)

```bash
mkfs.ext4 /dev/vg/ubuntu1_root
mkswap /dev/vg/ubuntu1_swap
```

![IMG-007](https://user-images.githubusercontent.com/36792594/183374197-c2e8a622-de67-4a6b-9e1c-ed34b1690145.png)


### VG 생성

```bash
vgcreate Disks /dev/sdb
```

### LVM Create

- 사이즈 지정

```bash
lvcreate -L 20G -n Domain-disk Disks
lvcreate -L 1G -n Domain-swao Disks
```

- LVM 100% 할당

```bash
lvcreate --extents 100%FREE -n Domain Disks
```

---

- ext4 File System 포맷

```bash
mkfs.ext4 /dev/Disks/Domain
```

- mkswap 포맷

```bash
lvcreate -L 1G -n Domain-swao Disks
```

### LVM Resize

```bash
lvresize -L 1G Disks/Domain-swap
```

### LVM 삭제

```bash
lvremove Disks/Domain
```

> - * 오류 발생시
> 
```bash
vgcreate Disks /dev/sdb
  Device /dev/sdb excluded by a filter.
```
>
>
```bash
wipefs -a /dev/sdb
/dev/sdb: 8 bytes were erased at offset 0x00000200 (gpt): 45 46 49 20 50 41 52 54
/dev/sdb: 8 bytes were erased at offset 0xb54ba25e00 (gpt): 45 46 49 20 50 41 52 54
/dev/sdb: 2 bytes were erased at offset 0x000001fe (PMBR): 55 aa
/dev/sdb: calling ioctl to re-read partition table: Success
```
>
```bash
vcreate /dev/sdb
  Physical volume "/dev/sdb" successfully created.
```
>
{: .important }
