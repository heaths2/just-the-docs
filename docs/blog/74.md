---
layout: default
title: 74
parent: Blog
grand_parent: Category
permalink: docs/category/blog/74
child_nav_order: desc
---
# SSH Kengen
{: .no_toc}

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---
## 개요

> - OpenSSH
{: .new }

### pip down

```python
# import sys
from contextlib import closing
from datetime import datetime
from subprocess import run
from termcolor import colored

exit_code = {
    0: "Operation was successful",
    1: "General error in file copy",
    2: "Destination is not directory, but it should be",
    3: "Maximum symlink level exceeded",
    4: "Connecting to host failed.",
    5: "Connection broken",
    6: "File does not exist",
    7: "No permission to access file.",
    8: "General error in sftp protocol",
    9: "File transfer protocol mismatch",
    10: "No file matches a given criteria",
    65: "Host not allowed to connect",
    66: "General error in ssh protocol",
    67: "Key exchange failed",
    68: "Reserved",
    69: "MAC error",
    70: "Compression error",
    71: "Service not available",
    72: "Protocol version not supported",
    73: "Host key not verifiable",
    74: "Connection failed",
    75: "Disconnected by application",
    76: "Too many connections",
    77: "Authentication cancelled by user",
    78: "No more authentication methods available",
    79: "Invalid user name",
}

def record_time():
    # Ex) 2022-01-01 10:04.123
    return datetime.now().strftime('[%Y-%m-%d %H:%M:%S.%f]')[:23]

def time_stamp():
    # Ex) 2022-01-01 10:04
    return datetime.now().strftime('%Y%m%d')

# hosts = sys.argv[1]

cmd = f"scp -q $host:sys_config /DEVICES/config/$host/{time_stamp()}.conf"
print(cmd)
# run([cmd], shell=True, capture_output=True, check=True).stdout.decode('utf-8')

with closing(open('help.txt', 'a')) as f:


    result = "aaaaa"
    f.write(result)
```


```bash
import requests
import json
from contextlib import closing

displays = f"""+{'-' * 40}+
F/W sys_config basckup report
+{'-' * 40}+
작업시간: 2023-02-23 09:33
총   계: 3
성   공: 3
실   패: 0
+{'-' * 40}+
[{colored('✅', 'green'):{' '}^{3}}] SysConfig Backup > fw-8f
[{colored('✅', 'green'):{' '}^{3}}] SysConfig Backup > fw-10f
[{colored('❌', 'red'):{' '}^{3}}] SysConfig Backup > fw-8f-oi
"""

url = "http://"

payload = json.dumps({
  "channel": "D04HCTERMB8",
  "username": "test",
  "text": displays,
  "icon_emoji": "🔥"
})
headers = {
  'Authorization': 'Token T9PCHLKA7/B04QH354QRZ/a7PX1CJ3EUFryEZW6KQBYvaM',
  'Content-Type': 'application/json',
  'Cookie': 'b=14259a5ada01f56c3cbedd37c1d85812'
}

response = requests.request("POST", url, headers=headers, data=payload)

print(response.text)
```